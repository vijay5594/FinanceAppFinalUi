{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as moment from 'moment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"src/app/services/notification.service\";\nimport * as i4 from \"src/app/services/user.service\";\nimport * as i5 from \"src/app/services/api.service\";\nimport * as i6 from \"@ionic/angular\";\nimport * as i7 from \"@angular/common\";\n\nfunction Tab2Page_h5_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h5\", 8);\n    i0.ɵɵtext(1, \"No Data Found\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction Tab2Page_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"ion-chip\", 9);\n    i0.ɵɵelementStart(2, \"ion-label\", 4);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r3.productName);\n  }\n}\n\nfunction Tab2Page_ion_col_18_ng_template_14_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1, \"Payment Amount is required *\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction Tab2Page_ion_col_18_ng_template_14_span_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1, \"Product Type is required *\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction Tab2Page_ion_col_18_ng_template_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵelementStart(1, \"h1\");\n    i0.ɵɵtext(2, \"Payment Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ion-content\", 10);\n    i0.ɵɵelementStart(4, \"ion-grid\", 16);\n    i0.ɵɵelementStart(5, \"form\", 17);\n    i0.ɵɵlistener(\"ngSubmit\", function Tab2Page_ion_col_18_ng_template_14_Template_form_ngSubmit_5_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return ctx_r10.payFormValue();\n    });\n    i0.ɵɵelementStart(6, \"ion-row\");\n    i0.ɵɵelementStart(7, \"ion-col\");\n    i0.ɵɵelementStart(8, \"ion-label\");\n    i0.ɵɵtext(9, \"Amount\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"ion-input\", 18);\n    i0.ɵɵtemplate(11, Tab2Page_ion_col_18_ng_template_14_span_11_Template, 2, 0, \"span\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"ion-col\", 20);\n    i0.ɵɵelementStart(13, \"ion-input\", 21);\n    i0.ɵɵlistener(\"ngModelChange\", function Tab2Page_ion_col_18_ng_template_14_Template_ion_input_ngModelChange_13_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const item_r5 = i0.ɵɵnextContext().$implicit;\n      return item_r5.productCustomerId = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"ion-row\");\n    i0.ɵɵelementStart(15, \"ion-col\");\n    i0.ɵɵelementStart(16, \"ion-col\");\n    i0.ɵɵelementStart(17, \"ion-label\");\n    i0.ɵɵtext(18, \"Payment Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"ion-select\", 22);\n    i0.ɵɵelementStart(20, \"ion-select-option\", 23);\n    i0.ɵɵtext(21, \"Cash\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"ion-select-option\", 23);\n    i0.ɵɵtext(23, \"Online\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(24, Tab2Page_ion_col_18_ng_template_14_span_24_Template, 2, 0, \"span\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"ion-row\");\n    i0.ɵɵelementStart(26, \"ion-col\");\n    i0.ɵɵelementStart(27, \"ion-label\");\n    i0.ɵɵtext(28, \"Collected By\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(29, \"ion-input\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(30, \"ion-row\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"ion-row\", 0);\n    i0.ɵɵelementStart(32, \"ion-col\");\n    i0.ɵɵelementStart(33, \"ion-button\", 25);\n    i0.ɵɵlistener(\"click\", function Tab2Page_ion_col_18_ng_template_14_Template_ion_button_click_33_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return ctx_r14.onClose();\n    });\n    i0.ɵɵtext(34, \" Cancel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"ion-col\");\n    i0.ɵɵelementStart(36, \"ion-button\", 26);\n    i0.ɵɵlistener(\"click\", function Tab2Page_ion_col_18_ng_template_14_Template_ion_button_click_36_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return ctx_r15.payFormValue();\n    });\n    i0.ɵɵtext(37, \" \\u20B9 \\u00A0Pay \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r5 = i0.ɵɵnextContext().$implicit;\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"formGroup\", ctx_r7.paymentForm);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r7.paymentForm.controls[\"paidAmount\"].valid && (ctx_r7.paymentForm.controls[\"paidAmount\"] == null ? null : ctx_r7.paymentForm.controls[\"paidAmount\"].touched));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", item_r5.productCustomerId);\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r7.paymentForm.controls[\"paymentType\"].valid && (ctx_r7.paymentForm.controls[\"paymentType\"] == null ? null : ctx_r7.paymentForm.controls[\"paymentType\"].touched));\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"disabled\", !ctx_r7.thisFormValid());\n  }\n}\n\nfunction Tab2Page_ion_col_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-col\");\n    i0.ɵɵelementStart(1, \"ion-card\", 10);\n    i0.ɵɵelementStart(2, \"ion-item\");\n    i0.ɵɵelementStart(3, \"ion-label\", 11);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ion-item\");\n    i0.ɵɵelementStart(6, \"ion-chip\", 2);\n    i0.ɵɵlistener(\"click\", function Tab2Page_ion_col_18_Template_ion_chip_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r18);\n      const item_r5 = restoredCtx.$implicit;\n      const ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.getHistory(item_r5.productCustomerId);\n    });\n    i0.ɵɵelement(7, \"ion-icon\", 12);\n    i0.ɵɵelementStart(8, \"ion-label\", 4);\n    i0.ɵɵtext(9, \"Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"ion-chip\", 13);\n    i0.ɵɵelementStart(11, \"ion-label\", 4);\n    i0.ɵɵtext(12, \"Collect\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"ion-modal\", 14);\n    i0.ɵɵtemplate(14, Tab2Page_ion_col_18_ng_template_14_Template, 38, 5, \"ng-template\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\" \", item_r5.slotNo, \" \\u00A0 \\u00A0\", item_r5.customerName, \" \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"PayListDetails\", item_r5.productCustomerId, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"trigger\", \"PayListDetails\", item_r5.productCustomerId, \"\");\n  }\n}\n\nexport let Tab2Page = /*#__PURE__*/(() => {\n  class Tab2Page {\n    constructor(router, fb, notificationService, userService, apiService, toast, alertController, modal) {\n      // this.router.routeReuseStrategy.shouldReuseRoute = () => false;\n      this.router = router;\n      this.fb = fb;\n      this.notificationService = notificationService;\n      this.userService = userService;\n      this.apiService = apiService;\n      this.toast = toast;\n      this.alertController = alertController;\n      this.modal = modal;\n      this.productId = localStorage.getItem('productId');\n      this.customerId = localStorage.getItem('customerId');\n      this.PaymentId = localStorage.getItem('productCustomerId');\n      this.currentUser = localStorage.getItem('userName');\n\n      this.generatePaymentForm = () => {\n        this.paymentForm = this.fb.group({\n          productCustomerId: [this.PaymentId],\n          paymentType: ['', Validators.required],\n          paymentDate: [moment().format()],\n          paidAmount: ['', Validators.required],\n          collectedBy: [this.currentUser]\n        });\n      };\n\n      this.getCustomerDetails();\n      this.generatePaymentForm();\n      this.customerList();\n    }\n\n    ngOnInit() {}\n\n    ionViewWillEnter() {\n      this.getCustomerDetails();\n      this.generatePaymentForm();\n      console.log('came');\n    }\n\n    ionViewWillLeave() {\n      console.log('left');\n      this._data = null;\n    }\n\n    addCustomerToProduct() {\n      this.userService.getProductId();\n      this.router.navigate(['tabs/tab3']);\n    }\n\n    getCustomerDetails() {\n      let pId = localStorage.getItem('productId');\n      this.apiService.CustomerForProductDetails(pId).subscribe(data => {\n        console.log(data, 'new');\n        this._data = data;\n        console.log(data, 'Geetha');\n      });\n    }\n\n    getHistory(data) {\n      this.userService.PaymentId = data;\n      this.router.navigate(['tabs/tab4']);\n      console.log(\"geeths\");\n    }\n\n    customerList() {\n      let pId = localStorage.getItem('productId'); // let pId = this.userService.getProductId();\n\n      this.apiService.ProductCustomer(pId).subscribe(data => {\n        console.log(data, 'new Data');\n        console.log(data, 'hello');\n        this.productCustomerList = data;\n      });\n    }\n\n    payFormValue() {\n      this.apiService.paymentDetails(this.paymentForm.value).subscribe(data => {\n        console.log(data, 'helo');\n        this.notificationService.success('Paid successfully');\n        this.router.navigate(['tabs/tab1']);\n      }, error => {\n        if (error.status === 400) {\n          this.notificationService.error(\"Max Month Reached\");\n        }\n      });\n      this.modal.dismiss();\n      this.paymentForm.reset();\n    }\n\n    onClose() {\n      this.modal.dismiss();\n    }\n\n    thisFormValid() {\n      if (this.paymentForm.valid) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n  }\n\n  Tab2Page.ɵfac = function Tab2Page_Factory(t) {\n    return new (t || Tab2Page)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.NotificationService), i0.ɵɵdirectiveInject(i4.UserService), i0.ɵɵdirectiveInject(i5.ApiService), i0.ɵɵdirectiveInject(i3.NotificationService), i0.ɵɵdirectiveInject(i6.AlertController), i0.ɵɵdirectiveInject(i6.ModalController));\n  };\n\n  Tab2Page.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: Tab2Page,\n    selectors: [[\"app-tab2\"]],\n    decls: 19,\n    vars: 7,\n    consts: [[1, \"ion-justify-content-center\", \"ion-margin-top\"], [2, \"margin-left\", \"3.3rem\", \"margin-top\", \"10px\"], [\"color\", \"tertiary\", 3, \"click\"], [\"name\", \"people\", \"color\", \"primary\"], [\"color\", \"teritary\"], [\"class\", \"isDataNot\", 4, \"ngIf\"], [1, \"ion-margin-top\"], [4, \"ngFor\", \"ngForOf\"], [1, \"isDataNot\"], [\"color\", \"tertiary\", 2, \"margin-left\", \"9rem\", \"margin-top\", \"2px\"], [1, \"ion-padding\"], [1, \"labelText\"], [\"name\", \"person\", \"color\", \"primary\"], [\"color\", \"tertiary\", \"slot\", \"end\", 3, \"id\"], [3, \"trigger\"], [1, \"app-header\", 2, \"background-color\", \"#001D6E\"], [\"id\", \"style-1\"], [3, \"formGroup\", \"ngSubmit\"], [\"type\", \"text\", \"formControlName\", \"paidAmount\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [2, \"visibility\", \"hidden\", \"display\", \"none\"], [\"type\", \"text\", \"disabled\", \"\", \"formControlName\", \"productCustomerId\", 3, \"ngModel\", \"ngModelChange\"], [\"placeholder\", \"Payment Type\", \"formControlName\", \"paymentType\"], [\"value\", \"Cash\"], [\"type\", \"text\", \"disabled\", \"\", \"formControlName\", \"collectedBy\"], [\"expand\", \"block\", \"color\", \"danger\", 3, \"click\"], [\"expand\", \"block\", 3, \"disabled\", \"click\"], [1, \"text-danger\"]],\n    template: function Tab2Page_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-content\");\n        i0.ɵɵelementStart(1, \"ion-item\");\n        i0.ɵɵelementStart(2, \"ion-row\", 0);\n        i0.ɵɵelementStart(3, \"ion-col\");\n        i0.ɵɵelementStart(4, \"h2\");\n        i0.ɵɵtext(5, \"Customer\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"ion-col\", 1);\n        i0.ɵɵelementStart(7, \"ion-chip\", 2);\n        i0.ɵɵlistener(\"click\", function Tab2Page_Template_ion_chip_click_7_listener() {\n          return ctx.addCustomerToProduct();\n        });\n        i0.ɵɵelement(8, \"ion-icon\", 3);\n        i0.ɵɵelementStart(9, \"ion-label\", 4);\n        i0.ɵɵtext(10, \"Add To Customer\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(11, Tab2Page_h5_11_Template, 2, 0, \"h5\", 5);\n        i0.ɵɵelementStart(12, \"ion-item\");\n        i0.ɵɵelementStart(13, \"ion-row\", 6);\n        i0.ɵɵtemplate(14, Tab2Page_div_14_Template, 4, 1, \"div\", 7);\n        i0.ɵɵpipe(15, \"slice\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"ion-grid\");\n        i0.ɵɵelementStart(17, \"ion-row\");\n        i0.ɵɵtemplate(18, Tab2Page_ion_col_18_Template, 15, 4, \"ion-col\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngIf\", ctx._data == false);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(15, 3, ctx._data, 0, 1));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx._data);\n      }\n    },\n    directives: [i6.IonContent, i6.IonItem, i6.IonRow, i6.IonCol, i6.IonChip, i6.IonIcon, i6.IonLabel, i7.NgIf, i7.NgForOf, i6.IonGrid, i6.IonCard, i6.IonModal, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i6.IonInput, i6.TextValueAccessor, i2.NgControlStatus, i2.FormControlName, i6.IonSelect, i6.SelectValueAccessor, i6.IonSelectOption, i6.IonButton],\n    pipes: [i7.SlicePipe],\n    styles: [\"ion-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:25px;box-shadow:#00000059 0 5px 15px}.labelText[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem}.labelFont[_ngcontent-%COMP%]{padding-left:1.2rem;font-size:1rem}ion-input[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%]{border-radius:10px;margin-top:1rem;border:.5px solid #c7d1ef;--padding-start: 15px !important;background-color:#fff}ion-item[_ngcontent-%COMP%]{--inner-border-width: 0;padding-right:10px;margin:0}ion-label[_ngcontent-%COMP%]{font-weight:800!important;margin:0;color:#001d6e!important}.saveButton[_ngcontent-%COMP%]{width:6.5rem;height:3rem;font-weight:700}ion-card[_ngcontent-%COMP%]{border-radius:18px;box-shadow:#64646f33 0 7px 29px}p[_ngcontent-%COMP%]{color:#001d6e}h1[_ngcontent-%COMP%]{color:#fff;font-weight:800}h3[_ngcontent-%COMP%]{color:#001d6e;font-weight:800;text-align:center}h2[_ngcontent-%COMP%]{color:#001d6e;font-weight:800}@media (min-width: 500px){ion-modal[_ngcontent-%COMP%]{--height: 600px}}.text-danger[_ngcontent-%COMP%]{font-weight:800 bold!important;color:#f03a3a;margin:1.5rem;margin-bottom:10rem!important}.isDataNot[_ngcontent-%COMP%]{text-align:center!important}\"]\n  });\n  return Tab2Page;\n})();","map":null,"metadata":{},"sourceType":"module"}